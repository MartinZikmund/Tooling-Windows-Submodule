<Project>
    <PropertyGroup>
        <!-- Uno 5.x for WinUI 2 (Uno.UI / UWP variant) -->
        <UnoUIPackageVersion>5.5.87</UnoUIPackageVersion>
        <!-- Uno 6.x for WinUI 3 (Uno.WinUI variant) -->
        <UnoWinUIPackageVersion>6.4.229</UnoWinUIPackageVersion>
        <!-- Select active version based on WinUIMajorVersion -->
        <CommonUnoPackageVersion Condition="'$(WinUIMajorVersion)' == '2'">$(UnoUIPackageVersion)</CommonUnoPackageVersion>
        <CommonUnoPackageVersion Condition="'$(WinUIMajorVersion)' != '2'">$(UnoWinUIPackageVersion)</CommonUnoPackageVersion>
    </PropertyGroup>

    <!-- All Uno-based project heads and MultiTarget-enabled library projects need to reference this file, while native (UWP/WinAppSdk) heads don't. -->
    <!-- WinUI 3 (Uno.WinUI 6.x) -->
    <ItemGroup Condition="'$(IsUno)' == 'true' AND '$(WinUIMajorVersion)' != '2'">
        <PackageReference Include="Uno.WinUI" Version="$(CommonUnoPackageVersion)" />
        <PackageReference Include="Uno.Fonts.Fluent" Version="2.6.1" />
    </ItemGroup>

    <!-- WinUI 2 (Uno.UI 5.x) -->
    <ItemGroup Condition="'$(IsUno)' == 'true' AND '$(WinUIMajorVersion)' == '2'">
        <PackageReference Include="Uno.UI" Version="$(CommonUnoPackageVersion)" />
        <PackageReference Include="Uno.Fonts.Fluent" Version="2.4.5" />
    </ItemGroup>

    <PropertyGroup Condition="'$(IsUno)' == 'true'">
        <UnoUIUseRoslynSourceGenerators>true</UnoUIUseRoslynSourceGenerators>
    </PropertyGroup>

    <!-- WinUI 2: Uno.UI.RemoteControl for wasm/wpf/gtk -->
    <ItemGroup Condition="'$(WinUIMajorVersion)' == '2' AND ('$(IsWasm)' == 'true' OR '$(IsWpf)' == 'true' OR '$(IsGtk)' == 'true')">
        <PackageReference Include="Uno.UI.RemoteControl" Version="$(CommonUnoPackageVersion)" Condition="'$(Configuration)'=='Debug'" />
    </ItemGroup>

    <!-- WinUI 3: Uno.WinUI.DevServer for wasm -->
    <ItemGroup Condition="'$(WinUIMajorVersion)' != '2' AND '$(IsWasm)' == 'true'">
        <PackageReference Include="Uno.WinUI.DevServer" Version="$(CommonUnoPackageVersion)" Condition="'$(Configuration)'=='Debug'" />
    </ItemGroup>

    <!-- WinUI 2: Skia desktop heads -->
    <ItemGroup Condition="'$(IsGtkHead)' == 'true'">
        <PackageReference Include="Uno.UI.Skia.Gtk" Version="$(CommonUnoPackageVersion)" Condition="'$(WinUIMajorVersion)' == '2'" />
        <PackageReference Include="Uno.WinUI.Skia.Gtk" Version="$(CommonUnoPackageVersion)" Condition="'$(WinUIMajorVersion)' != '2'" />
    </ItemGroup>

    <ItemGroup Condition="'$(IsWpfHead)' == 'true'">
        <PackageReference Include="Uno.UI.Skia.Wpf" Version="$(CommonUnoPackageVersion)" Condition="'$(WinUIMajorVersion)' == '2'" />
        <PackageReference Include="Uno.WinUI.Skia.Wpf" Version="$(CommonUnoPackageVersion)" Condition="'$(WinUIMajorVersion)' != '2'" />
    </ItemGroup>

    <PropertyGroup Condition="'$(IsWpfHead)' == 'true'">
        <!-- Ignorable issue from SkiaSharp package, see: https://github.com/CommunityToolkit/Labs-Windows/pull/119#issuecomment-1125373091 -->
        <NoWarn>$(NoWarn);NU1701;</NoWarn>
    </PropertyGroup>

    <PropertyGroup>
        <!--
            Uno uses IDisposable internally, but exposes it publicly.
            See https://github.com/CommunityToolkit/Labs-Windows/pull/275#issuecomment-1331113635
         -->
        <NoWarn>$(NoWarn);CA1063;CA1001;CA2213</NoWarn>

        <!-- "This call site is reachable on all platforms" -->
        <NoWarn>$(NoWarn);CA1416;</NoWarn>

        <!-- "XML comment 'End tag was not expected at this location.'" -->
        <NoWarn>$(NoWarn);CS1570;</NoWarn>
    </PropertyGroup>

    <!-- Conditional WebAssembly packages -->
    <ItemGroup Condition="'$(IsWasmHead)' == 'true' AND '$(WinUIMajorVersion)' == '2'">
        <PackageReference Include="Uno.UI.WebAssembly" Version="$(CommonUnoPackageVersion)" />
    </ItemGroup>

    <ItemGroup Condition="'$(IsWasmHead)' == 'true' AND '$(WinUIMajorVersion)' != '2'">
        <PackageReference Include="Uno.WinUI.WebAssembly" Version="$(CommonUnoPackageVersion)" />
    </ItemGroup>
</Project>
